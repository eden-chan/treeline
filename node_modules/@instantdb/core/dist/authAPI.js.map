{"version":3,"file":"authAPI.js","sourceRoot":"","sources":["../src/authAPI.js"],"names":[],"mappings":"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","sourcesContent":["import { jsonFetch } from \"./utils/fetch\";\n\nexport function sendMagicCode({ apiURI, appId, email }) {\n  return jsonFetch(`${apiURI}/runtime/auth/send_magic_code`, {\n    method: \"POST\",\n    headers: { \"content-type\": \"application/json\" },\n    body: JSON.stringify({ \"app-id\": appId, email }),\n  });\n}\n\nexport async function verifyMagicCode({ apiURI, appId, email, code }) {\n  const res = await jsonFetch(`${apiURI}/runtime/auth/verify_magic_code`, {\n    method: \"POST\",\n    headers: { \"content-type\": \"application/json\" },\n    body: JSON.stringify({ \"app-id\": appId, email, code }),\n  });\n  return res;\n}\n\nexport async function verifyRefreshToken({ apiURI, appId, refreshToken }) {\n  const res = await jsonFetch(`${apiURI}/runtime/auth/verify_refresh_token`, {\n    method: \"POST\",\n    headers: { \"content-type\": \"application/json\" },\n    body: JSON.stringify({\n      \"app-id\": appId,\n      \"refresh-token\": refreshToken,\n    }),\n  });\n  return res;\n}\n\n/**\n * @param {Object} params\n * @param {string} params.apiURI\n * @param {string} params.appId\n * @param {string} params.code\n * @param {string | null | undefined} [params.codeVerifier]\n */\nexport async function exchangeCodeForToken({\n  apiURI,\n  appId,\n  code,\n  codeVerifier,\n}) {\n  const res = await jsonFetch(`${apiURI}/runtime/oauth/token`, {\n    method: \"POST\",\n    headers: { \"content-type\": \"application/json\" },\n    body: JSON.stringify({\n      app_id: appId,\n      code: code,\n      code_verifier: codeVerifier,\n    }),\n  });\n  return res;\n}\n\n/**\n * @param {Object} params\n * @param {string} params.apiURI\n * @param {string} params.appId\n * @param {string} params.clientName\n * @param {string} params.idToken\n * @param {string | null | undefined} [params.refreshToken]\n * @param {string | null | undefined} [params.nonce]\n */\nexport async function signInWithIdToken({\n  apiURI,\n  appId,\n  nonce,\n  idToken,\n  clientName,\n  refreshToken,\n}) {\n  const res = await jsonFetch(`${apiURI}/runtime/oauth/id_token`, {\n    method: \"POST\",\n    headers: { \"content-type\": \"application/json\" },\n    body: JSON.stringify({\n      app_id: appId,\n      nonce,\n      id_token: idToken,\n      client_name: clientName,\n      refresh_token: refreshToken,\n    }),\n  });\n  return res;\n}\n\n/**\n * @param {Object} params\n * @param {string} params.apiURI\n * @param {string} params.appId\n * @param {string} params.refreshToken\n */\nexport async function signOut({ apiURI, appId, refreshToken }) {\n  const res = await jsonFetch(`${apiURI}/runtime/signout`, {\n    method: \"POST\",\n    headers: {\n      \"content-type\": \"application/json\",\n    },\n    body: JSON.stringify({\n      app_id: appId,\n      refresh_token: refreshToken,\n    }),\n  });\n  return res;\n}\n"]}