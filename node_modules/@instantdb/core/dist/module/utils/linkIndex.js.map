{"version":3,"file":"linkIndex.js","sourceRoot":"","sources":["../../../src/utils/linkIndex.ts"],"names":[],"mappings":"AAcA,MAAM,UAAU,eAAe,CAAC,MAAuC;IACrE,OAAO,MAAM,CAAC,MAAM,CAAC,MAAM,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,CAAC,SAAS,EAAE,IAAI,EAAE,EAAE;;;QAC5D,MAAA,SAAS,MAAC,IAAI,CAAC,OAAO,CAAC,EAAE,qCAAzB,SAAS,OAAsB,EAAE,EAAC;QAClC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG;YAC/C,SAAS,EAAE,IAAI;YACf,UAAU,EAAE,IAAI,CAAC,OAAO,CAAC,GAAG,KAAK,KAAK;YACtC,IAAI;SACL,CAAC;QAEF,MAAA,SAAS,MAAC,IAAI,CAAC,OAAO,CAAC,EAAE,qCAAzB,SAAS,OAAsB,EAAE,EAAC;QAClC,SAAS,CAAC,IAAI,CAAC,OAAO,CAAC,EAAE,CAAC,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG;YAC/C,SAAS,EAAE,KAAK;YAChB,UAAU,EAAE,IAAI,CAAC,OAAO,CAAC,GAAG,KAAK,KAAK;YACtC,IAAI;SACL,CAAC;QAEF,OAAO,SAAS,CAAC;IACnB,CAAC,EAAE,EAAe,CAAC,CAAC;AACtB,CAAC","sourcesContent":["import type { InstantGraph, LinkDef, LinksDef } from \"../schemaTypes\";\n\nexport type LinkIndex = Record<\n  string,\n  Record<\n    string,\n    {\n      isForward: boolean;\n      isSingular: boolean;\n      link: LinkDef<any, any, any, any, any, any, any>;\n    }\n  >\n>;\n\nexport function createLinkIndex(schema: InstantGraph<any, LinksDef<{}>>) {\n  return Object.values(schema.links).reduce((linkIndex, link) => {\n    linkIndex[link.forward.on] ??= {};\n    linkIndex[link.forward.on][link.forward.label] = {\n      isForward: true,\n      isSingular: link.forward.has === \"one\",\n      link,\n    };\n\n    linkIndex[link.reverse.on] ??= {};\n    linkIndex[link.reverse.on][link.reverse.label] = {\n      isForward: false,\n      isSingular: link.reverse.has === \"one\",\n      link,\n    };\n\n    return linkIndex;\n  }, {} as LinkIndex);\n}\n"]}